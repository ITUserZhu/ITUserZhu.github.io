[{"title":"Express的使用","date":"2015-07-22T07:08:32.000Z","path":"2015/07/22/Express/","text":"基础+中间件 数据库 使用node操作数据 Express 一个基于Nodejs快速web开发框架 做网站后台 中间件 express 核心就是面向中间件编程 app.use(function(req,res){//handle})中间件: 任意请求都会进来,不关心请求路径和请求方法 app.use(route,function(req,res){//handle})中间件:只有该请求路径开头的才会进来执行+app.get(‘请求路径’,function(req,res){})只有以get请求 第一个参数:请求路径+app.post(‘请求路径’,function(req,res){})只有以post请求 第一个参数:请求路径 对于同一次请求,流通多个中间件都是同一个req,res对象 12345678app.use(function(req,res,next)&#123; console.log(11) next()&#125;)//调用next()才会执行下一个被匹配的中间件app.use(function(req,res) &#123; console.log(222)&#125;) API1.express express() 得到一个实例app express.static() 方便地托管静态文件唯一中间件 express.Router() 可使用 express.Router 类创建模块化、可挂载的路由句柄 2.Application 12app.get() app.post() 设置路由 通过 app 调用对应的 get 或 post 方法 根据不同的请求方法 + 请求路径，转发到具体的处理函数 这里的路由中的第一个参数需要传入一个字符换：请求路径（pathname，不包含查询字符串） 请求处理函数需要接收两个参数：req 和 res req：请求对象 可以通过请求对象获取一些客户端的请求数据，例如请求 URL、请求方法、请求查询字符串 等数据 req 也是在原来的基础之上，扩展添加了一些有用的方法或属性 例如：req.query res：响应对象 可以给客户端发送响应数据 Express 在基于原来的 res 基础之又提供了一些快捷便利的方法 例如：res.redirect() app.listen() 监听 端口,启动服务器 12345678app.use(function (req, res) &#123; // handle &#125;)//中间件：任何请求都会进来，不关心请求路径和请求方法app.use(&apos;请求路径&apos;, function (req, res) &#123; // handle &#125;) //中间件：只有该请求路径开头的才会进来执行app.get(&apos;请求路径&apos;, function (req, res) &#123; // handle &#125;) //只有以 get 请求 第一个参数：请求路径的时候才会进来app.post(&apos;请求路径&apos;, function (req, res) &#123; // handle &#125;)//只有以 post 请求 第一个参数：请求路径的时候才会进来 3.Request req.url 获取请求路径 req.method 获取请求方法 req.headers 获取请求头 req.hostname 获取请求主机名 req.ip 获取Ip req.query 获取请求字符串 req.body 获取主体 req.params req.cookie req.path req.baseUrl req.originalUrl MongoDB64 位版本启动 MongoDB 数据服务： 12mongod --dbpath=C:\\data\\dbmongod --dbpath C:\\data\\db 32 位版本使用下面的命令启动数据服务： 1mongod --dbpath 数据存储路径 --journal --storageEngine=mmapv1 提示：如果不加 --dbpath, mongod 会自动使用 执行命令所属磁盘根目录/data/db 目录作为自己的数据存储路径，所以，如果当前磁盘已经有了 磁盘根路径\\data\\db 目录了，可以省略 --dbpath。 执行完上面的命令并成功开启 MongoDB 数据服务实例之后，就把该控制台最小化到一边就可以了，千万不要关闭，否则关闭终端就是关闭数据库了，如果对数据库的操作结束，可以打开该控制台通过 Ctrl + C 关闭或者直接关闭终端。 基本操作命令 show dbs 查看当前服务实例上所有的数据库 use 数据库名称 这个命令表示切换到指定的数据库 如果没有，也不会创建 如果已经有了，则表示切换到这个数据库对该数据库进行操作 连接到数据库之后，默认有一个变量叫做：db，终端默认把 db 赋值给了 test db 查看当前所处的数据库 db.集合名称.insert(数据文档) show collections 查看当前数据库中所有的集合 db.集合名称.find() 查询指定集合中所有的数据 可以通过 db.集合名称.find().pretty() 美化输出格式 默认是查询所有，可以通过：db.集合名称.find({查询条件}) 按条件查询集合中的数据 db.集合名称.update({更新条件}, {要更新的字段}) 更新指定集合数据 db.集合名称.remove({删除条件}) 删除指定集合中的数据"}]